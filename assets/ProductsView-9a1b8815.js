import{ap as B,af as S,ae as x,ad as A,x as w,ar as R,ag as d,ah as v,ai as t,c as a,ay as T,V as D,az as L,am as u,ax as f,aw as V,aA as E,aE as g,J as h,w as N,O as $,an as z,aB as I,W as q,ao as k,A as F,Y as J,as as M,av as O,ac as U,aC as W,aD as Y}from"./index-2a6e0187.js";import{V as y}from"./VRow-1fd3371c.js";import{V as P,a as b}from"./VCol-ba6d81c5.js";import{V as j}from"./VDivider-303ab244.js";const G={__name:"ProductCard",props:["_id","category","description","image","name","price","sell"],setup(s){const{apiAuth:p}=k(),i=S(),n=x(),c=A(),o=w(!1),e=s,m=async()=>{var _,l;if(!i.isLogin){c.push("/login");return}try{const{data:r}=await p.patch("/users/cart",{product:e._id,quantity:1});i.cart=r.result,n({text:"成功加入購物車",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}})}catch(r){const C=((l=(_=r==null?void 0:r.response)==null?void 0:_.data)==null?void 0:l.message)||"發生錯誤，請稍後再試";n({text:C,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}};return(_,l)=>{const r=R("RouterLink");return d(),v(b,null,{default:t(()=>[a(y,null,{default:t(()=>[a(P,{cols:"12"},{default:t(()=>[a(T,{class:"product-card",lass:"mx-auto","max-width":"344",hover:""},{default:t(()=>[a(D,{src:s.image[0],height:"200",cover:""},null,8,["src"]),a(L,null,{default:t(()=>[a(r,{class:"text-decoration-none Color",to:"/products/"+s._id},{default:t(()=>[u(f(s.name),1)]),_:1},8,["to"])]),_:1}),a(V),a(E,{color:"#014803"},{default:t(()=>[u("$"+f(s.price),1)]),_:1}),a(g,{style:{"white-space":"pre"}},{default:t(()=>[a(h,{color:"#014803","prepend-icon":"mdi-cart",onClick:m},{default:t(()=>[u("加入購物車")]),_:1})]),_:1}),a(g,null,{default:t(()=>[a(h,{color:"#014803",variant:"text"},{default:t(()=>[u("商品說明")]),_:1}),a(V),a(h,{icon:o.value?"mdi-chevron-up":"mdi-chevron-down",onClick:l[0]||(l[0]=C=>o.value=!o.value)},null,8,["icon"])]),_:1}),a(N,null,{default:t(()=>[$(z("div",null,[a(j),a(I,{class:"Color",style:{"white-space":"pre"}},{default:t(()=>[u(f(s.description),1)]),_:1})],512),[[q,o.value]])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},H=B(G,[["__scopeId","data-v-46f6ad72"]]),aa={__name:"ProductsView",setup(s){const{api:p}=k(),i=x(),n=w([]);return F(async()=>{var c,o;try{const{data:e}=await p.get("/products",{params:{itemsPerPage:-1}});n.value.push(...e.result.data),await J()}catch(e){console.log(e);const m=((o=(c=e==null?void 0:e.response)==null?void 0:c.data)==null?void 0:o.message)||"發生錯誤，請稍後再試";i({text:m,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}}),(c,o)=>(d(),v(b,null,{default:t(()=>[a(y,null,{default:t(()=>[(d(!0),M(U,null,O(n.value,e=>(d(),v(P,{cols:"12",md:"6",lg:"3",key:e._id},{default:t(()=>[a(H,W(Y(e)),null,16)]),_:2},1024))),128))]),_:1})]),_:1}))}};export{aa as default};
